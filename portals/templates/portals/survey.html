{% extends "page.html" %}
{% load staticfiles thumbnail account_tags %}

{% block extracss %}
<link rel="stylesheet" href="{% static 'css/portal.css' %}">
{% endblock%}

{% block extrajs %}
<script src="{% static 'js/portal.js' %}"></script>
<!--[if lte IE 9]>       
    <script src="{% static 'ie-bootstrap-carousel/ie-bootstrap-carousel.min.js' %}"></script>
<![endif]-->
{% endblock%}

{% block title %}Mr-Handsome{% endblock %}

{% block content %}
<div class="carousel slide bg-gray" id="survey">
    <div class="carousel-inner">
        <div class="item active" id="style">
            <div class="carousel-caption">
                <div class="container">
                    <h4>你想要哪种风格？</h4>
                    <div class="row selector auto-slide">
                        {% for choice in STYLE_CHOICES %}
                        <div class="col-sm-3 option" data-value="{{ choice.0 }}", data-label="{{ choice.1 }}">
                            <a href="javascript:void(0)">
                                <img class="img-responsive" src="{{ STATIC_URL }}image/q1_{{ choice.0 }}.png" />
                                <span class="text-center">{{ choice.1 }}</span>
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

        <div class="item" id="age">
            <div class="carousel-caption">
                <div class="container text-center">
                    <h4>你处于哪个年龄段？</h4>
                    <div class="row selector auto-slide">
                        {% for choice in AGE_GROUP_CHOICES %}
                        <div class="col-sm-2 option" data-value="{{ choice.0 }}", data-label="{{ choice.1 }}">
                            <a href="javascript:void(0)">
                                <img class="img-responsive" src="{{ STATIC_URL }}image/age_level_{{ forloop.counter }}.png" />
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <ul class="pager">
                                <li class="previous"><a href="javascript:void(0);">&larr;</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="item" id="designer">
            <div class="carousel-caption" id="designer">
                <div class="container">
                    <h4>你希望哪位设计师为你量身定制？</h4>
                    <div class="row selector {% if not user.is_authenticated %}last-slide{% else %}auto-slide{% endif %}" data-url="{% url 'portals:survey_price' %}">
                        {% for designer in designers %}
                        <div class="col-sm-3 option" data-value="{{ designer.user.id }}", data-label="{{ designer.user.get_full_name|default_if_empty:designer.user.username }}" data-avatar="{{ designer.avatar|thumbnail_url:'small' }}">
                            <a href="javascript:void(0)" class="image-option">
                                <img class="img-responsive avatar" src="{{ designer.avatar|thumbnail_url:'small' }}" />
                                <span class="text-center">{{ designer.user.get_full_name|default_if_empty:designer.user.username }}</span><br />
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <ul class="pager">
                                <li class="previous"><a href="javascript:void(0);">&larr;</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {% if user.is_authenticated %}
        <div class="item" id="price">
            <div class="carousel-caption">
                <div class="container">
                    <h4>你希望整套搭配在什么价格？</h4>
                    <div class="row selector last-slide" data-url="{% url 'accounts:update' %}?next={% url 'orders:create' %}">
                        {% for choice in PRICE_CHOICES %}
                        <div class="col-sm-2 option" data-value="{{ choice.0 }}", data-label="{{ choice.1 }}">
                            <a href="javascript:void(0)">
                                <img class="img-responsive" src="{% static 'image/age_level_1.png' %}" />
                                <span class="text-center">{{ choice.0 }}</span>
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <ul class="pager">
                                <li class="previous"><a href="javascript:void(0);">&larr;</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
